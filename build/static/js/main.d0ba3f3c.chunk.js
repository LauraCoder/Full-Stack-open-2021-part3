(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(15),a=n.n(o),r=n(6),u=n(3),i=n(4),s=n.n(i),l="/api/persons",d={getAll:function(){return s.a.get(l).then((function(e){return e.data}))},create:function(e){return s.a.post(l,e).then((function(e){return e.data}))},update:function(e,t){return s.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},deleteContact:function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))}},j=n(0),b=function(e){var t=e.person,n=e.deleteName;return Object(j.jsxs)("li",{children:[t.name," ",t.number," ",Object(j.jsx)("button",{onClick:function(){return n(t.id,t.name)},children:"delete"})]})},f=function(e){var t=e.contacts,n=e.deleteName;return Object(j.jsx)("ul",{children:t.map((function(e){return Object(j.jsx)(b,{person:e,deleteName:n},e.id)}))})},m=function(e){var t=e.filterNames,n=e.handleFilter;return Object(j.jsxs)("div",{children:["Filter contacts with:",Object(j.jsx)("input",{value:t,onChange:n})]})},h=function(e){var t=e.addName,n=e.newName,c=e.handleNameChange,o=e.newNumber,a=e.handleNumber;return Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:n,onChange:c})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:o,onChange:a})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var t=e.message;return null===t?null:Object(j.jsx)("div",{className:t.type,children:t.text})},O=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],a=Object(c.useState)(""),i=Object(u.a)(a,2),s=i[0],l=i[1],b=Object(c.useState)(""),O=Object(u.a)(b,2),x=O[0],v=O[1],w=Object(c.useState)(""),N=Object(u.a)(w,2),g=N[0],C=N[1],y=Object(c.useState)(null),k=Object(u.a)(y,2),L=k[0],S=k[1];Object(c.useEffect)((function(){d.getAll().then((function(e){o(e)}))}),[]);var T=""===g?n:n.filter((function(e){return e.name.toLowerCase().includes(g.toLowerCase())}));return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(p,{message:L}),Object(j.jsx)(m,{filterNames:g,handleFilter:function(e){return C(e.target.value)}}),Object(j.jsx)("h2",{children:"Add a new contact"}),Object(j.jsx)(h,{addName:function(e){e.preventDefault();var t={name:s,number:x},c=n.find((function(e){return e.name.toLowerCase()===t.name.toLowerCase()})),a=Object(r.a)(Object(r.a)({},c),{},{number:t.number});n.some((function(e){return e.name.toLowerCase()===t.name.toLowerCase()}))?window.confirm("".concat(s," is already added to phonebook. Would you like to replace the old number with a new one?"))&&d.update(c.id,a).then((function(e){o(n.map((function(t){return t.name!==a.name?t:e}))),S({text:"Number of ".concat(s," was updated"),type:"success"}),setTimeout((function(){S(null)}),2e3),console.log("Contact updated",e)})).catch((function(e){console.log(e.response.data),S({text:e.response.data.error,type:"error"}),setTimeout((function(){S(null)}),3e3)})):d.create(t).then((function(e){o(n.concat(e)),S({text:"".concat(s," was added to the phonebook"),type:"success"}),setTimeout((function(){S(null)}),2e3),console.log("Contact created",e)})).catch((function(e){console.log(e.response.data),S({text:e.response.data.error,type:"error"}),setTimeout((function(){S(null)}),3e3)})),l(""),v("")},newName:s,handleNameChange:function(e){return l(e.target.value)},newNumber:x,handleNumber:function(e){return v(e.target.value)}}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(f,{contacts:T,deleteName:function(e,t){window.confirm("Delete ".concat(t," ?"))&&d.deleteContact(e).then((function(c){o(n.filter((function(t){return t.id!==e}))),S({text:"Contact ".concat(t," was deleted"),type:"success"}),setTimeout((function(){S(null)}),2e3),console.log("Contact deleted",c)})).catch((function(c){S({text:"Note '".concat(t,"' was already removed from server"),type:"error"}),setTimeout((function(){S(null)}),2e3),console.error(c),o(n.filter((function(t){return t.id!==e})))}))}})]})};n(39);a.a.render(Object(j.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.d0ba3f3c.chunk.js.map